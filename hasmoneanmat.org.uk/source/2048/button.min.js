class SIDEBAR_CLASS{constructor(){this.sidebar=null,this.sidebarBtn=null,this.gameList=null,this.isHidden=!0,this.isPinned=null,this.isDragging=!1,this.initSidebarBtnPosition=null,this.EventStorage(),this.EventPinClick=this.EventPinClick.bind(this),this.EventShowGame=this.EventShowGame.bind(this),this.startDragging=this.startDragging.bind(this),this.EventMouseMove=this.EventMouseMove.bind(this),this.EventHideGames=this.EventHideGames.bind(this),this.EventGameChoose=this.EventGameChoose.bind(this),this.EventRightClick=this.EventRightClick.bind(this),this.EventHideIcon=this.EventHideIcon.bind(this)}EventStorage(){chrome.storage.local.get(i=>{this.isPinned=!!i.hasOwnProperty("isPinned")&&i.isPinned,this.isHidden=!!i.hasOwnProperty("isHidden")&&i.isHidden,this.isHidden||this.createSidebar()})}createSidebar(){document.body.insertAdjacentHTML("afterbegin",'\n            <div class="div-sidebar">\n                <span class="openicon"></span><ul class="settings"><li class="hide-btn"><span>Hide Icon</span></li></ul>\n            </div>\n        '),this.sidebar=document.querySelector(".div-sidebar"),this.initSidebarListeners()}initSidebarListeners(){this.sidebarBtn=$(".div-sidebar .openicon");const i=$(".div-sidebar .hide-games");this.sidebarBtn.on("contextmenu",this.EventRightClick),this.settingsList=$(".div-sidebar .settings"),this.gameList=$(".div-sidebar .game-list"),this.sidebarBtn.on("mouseup",this.EventShowGame),this.sidebarBtn.on("mousedown",this.startDragging),document.addEventListener("mousemove",this.EventMouseMove),document.addEventListener("mouseup",()=>this.isDragging=!1),i.on("click",this.EventHideGames),this.gameList.on("click",this.EventGameChoose),this.hideBtn=$("div.div-sidebar .settings li.hide-btn"),this.hideBtn.on("click",this.EventHideIcon)}EventPinClick(i){const t=i.target.closest(".btnPinned");t.classList.toggle("active");const s=t.classList.contains("active");chrome.storage.local.set({isPinned:s},()=>{})}EventHideIcon(i){chrome.storage.local.set({isHidden:!0},()=>{}),$("div.div-sidebar").remove()}EventRightClick(){window.event.preventDefault(),this.EventHideGames(),this.settingsList.slideToggle(100)}EventShowGame(){1==window.event.which&&(this.checkSidebarDragging()||(chrome.runtime.sendMessage({action:"playPuzzle"},i=>{console.log(i)}),this.sidebar.classList.contains("transparent")&&this.sidebar.classList.remove("transparent")))}checkSidebarDragging(){const i=this.sidebarBtn[0].getBoundingClientRect().left,t=this.sidebarBtn[0].getBoundingClientRect().top;return!(this.initSidebarBtnPosition.top===t&&this.initSidebarBtnPosition.left===i)}startDragging(){1==window.event.which&&(this.isDragging=!0,this.initSidebarBtnPosition=this.sidebarBtn[0].getBoundingClientRect())}EventMouseMove(i){if(this.sidebarBtn[0].ondragstart=function(){return!1},!this.isDragging)return;const t=i.clientX-this.sidebarBtn[0].offsetWidth/2,s=i.clientY-this.sidebarBtn[0].offsetHeight/2;this.sidebar.style.left=t+"px",this.sidebar.style.top=s+"px"}EventHideGames(){this.gameList.slideUp(400),this.sidebar.classList.contains("transparent")||this.sidebar.classList.add("transparent")}EventGameChoose(i){const t=i.target.closest("li");t.classList.contains("hide-list")||chrome.runtime.sendMessage({action:"create-window",url:t.dataset.url},()=>{})}}const side_bar=new SIDEBAR_CLASS;